<div th:fragment="appHeader" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <!-- Header only appears when the user is authenticated -->

    <header class="app-header" sec:authorize="isAuthenticated()">
        <div class="header-left">
            <h1>Library</h1>
            <nav class="header-nav">
                <a th:href="@{/}">Home</a>
                <a th:href="@{/products}">Products</a>
                <a th:href="@{/books}">Books</a>
                <a th:href="@{/magazines}">Magazines</a>
                <a th:href="@{/discMags}">DiscMags</a>
            </nav>
        </div>
        <div class="header-actions">
            <span style="color:var(--muted); margin-right:12px; align-self:center;">Logged in as: <strong><span sec:authentication="name">User</span></strong></span>
            <a th:href="@{/cart}" class="btn">Cart</a>
            <form th:action="@{/logout}" method="post" style="display:inline; margin-left:8px;">
                <button type="submit" class="btn btn-signout">Sign out</button>
            </form>
        </div>
    </header>

    <header class="app-header" sec:authorize="isAnonymous()">
        <div class="header-left">
            <h1>Library</h1>
            <nav class="header-nav">
                <a th:href="@{/}">Home</a>
                <a th:href="@{/products}">Products</a>
            </nav>
        </div>
        <div class="header-actions">
            <a th:href="@{/login}" class="btn btn-outline">Sign In</a>
            <a th:href="@{/register}" class="btn">Register</a>
        </div>
    </header>
</div>
